let headers=[];chrome.runtime.onMessage.addListener(((message,sender,sendResponse)=>{"REQUEST_HEADERS"===message.type&&message.headers.length>headers.length&&(headers=message.headers)})),window.addEventListener("load",(()=>{const myDiv=document.createElement("div"),tipsImg=document.createElement("img");tipsImg.src=chrome.runtime.getURL("images/icon.ico"),myDiv.className="float-tips",myDiv.style.top=window.innerHeight-200+"px",myDiv.addEventListener("click",(()=>{clickPage(),document.getElementById("startTask").addEventListener("click",(()=>{!function(url,callback){const script=document.createElement("script");script.src=url,script.onload=callback,document.body.appendChild(script)}(chrome.runtime.getURL("utils/template.js"),(function(){let selectVal=document.getElementById("operator-type").value;const hh=document.createElement("script");hh.src=chrome.runtime.getURL(`utils/${"mr"+selectVal}.js`),document.body.appendChild(hh),document.getElementById("startTask").disabled=!0}))}))})),myDiv.appendChild(tipsImg),window.addEventListener("message",(event=>{if("EXTENSION_READY"===event.data.type){const script=document.createElement("script");script.src=chrome.runtime.getURL("utils/caller.js"),script.dataset.func="startTask",script.dataset.args=JSON.stringify([allData,headers]),document.body.appendChild(script)}})),setTimeout((()=>{!function(){const target_action=actionList.find((m=>m.url.indexOf(window.location.host)>-1));let h={},user_url="";target_action&&(["111","112","115","212"].indexOf(target_action.js)>-1&&(h=function(){const headersObject={};return headers.forEach((header=>{header.name&&(headersObject[header.name.toLowerCase()]=header.value)})),headersObject}(),user_url="https://igi.hsa.gd.gov.cn/tps_local/web/auth/user/query_user_info"),fetch(user_url,{method:"GET",headers:h}).then((response=>response.json())).then((data=>{console.log(data);let s=JSON.stringify(data);(s.indexOf("迈瑞")>1||s.indexOf("长岛生物")>1)&&document.body.appendChild(myDiv)})).catch((error=>console.log(error))))}()}),3e3)}));